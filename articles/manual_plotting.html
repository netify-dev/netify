<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Manual Plotting with ggplot2 • netify</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Manual Plotting with ggplot2">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">netify</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/foundations.html">Foundations</a></li>
    <li><a class="dropdown-item" href="../articles/event_data.html">Conflict Application: Event Data</a></li>
    <li><a class="dropdown-item" href="../articles/ego_networks.html">Ego Networks</a></li>
    <li><a class="dropdown-item" href="../articles/manual_plotting.html">Manual Plotting with ggplot2</a></li>
    <li><a class="dropdown-item" href="../articles/resources.html">Helpful Resources</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/netify-dev/netify/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Manual Plotting with ggplot2</h1>
                        <h4 data-toc-skip class="author">Cassy Dorff and
Shahryar Minhas</h4>
            
            <h4 data-toc-skip class="date">2025-06-15</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/netify-dev/netify/blob/main/vignettes/manual_plotting.Rmd" class="external-link"><code>vignettes/manual_plotting.Rmd</code></a></small>
      <div class="d-none name"><code>manual_plotting.Rmd</code></div>
    </div>

    
    
<p>This vignette provides an overview of how to create customizable
plots using <code>ggplot2</code> while still using <code>netify</code>
to prepare the data.</p>
<p>Lets load the necessary libraries.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://netify-dev.github.io/netify/">netify</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<p>We’ll also use the <code>ggnewscale</code> package to create multiple
legends when necessary in the same plot (e.g., if you want to have
legends for a color aesthetic for both nodes and edges).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="st">'ggnewscale'</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'ggnewscale'</span>, repos<span class="op">=</span><span class="st">'https://cloud.r-project.org'</span><span class="op">)</span> <span class="op">}</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://eliocamp.github.io/ggnewscale/" class="external-link">ggnewscale</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="preparing-data">Preparing data<a class="anchor" aria-label="anchor" href="#preparing-data"></a>
</h2>
<p>First lets create a <code>netlet</code> object from some dyadic data
(ICEWS data) using the <code>netify</code> package.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load icews data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">icews</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># choose attributes</span></span>
<span><span class="va">nvars</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">'i_polity2'</span>, <span class="st">'i_log_gdp'</span>, <span class="st">'i_log_pop'</span> <span class="op">)</span></span>
<span><span class="va">dvars</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">'matlCoop'</span>, <span class="st">'verbConf'</span>, <span class="st">'matlConf'</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># create a netify object</span></span>
<span><span class="va">netlet</span> <span class="op">=</span> <span class="fu"><a href="../reference/netify.html">netify</a></span><span class="op">(</span></span>
<span>    <span class="va">icews</span>, </span>
<span>    actor1<span class="op">=</span><span class="st">'i'</span>, actor2<span class="op">=</span><span class="st">'j'</span>,</span>
<span>    time <span class="op">=</span> <span class="st">'year'</span>,</span>
<span>    symmetric<span class="op">=</span><span class="cn">FALSE</span>, weight<span class="op">=</span><span class="st">'verbCoop'</span>,</span>
<span>    mode<span class="op">=</span><span class="st">'unipartite'</span>, sum_dyads<span class="op">=</span><span class="cn">FALSE</span>,</span>
<span>    actor_time_uniform<span class="op">=</span><span class="cn">TRUE</span>, actor_pds<span class="op">=</span><span class="cn">NULL</span>,</span>
<span>    diag_to_NA<span class="op">=</span><span class="cn">TRUE</span>, missing_to_zero<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>    nodal_vars <span class="op">=</span> <span class="va">nvars</span>, </span>
<span>    dyad_vars <span class="op">=</span> <span class="va">dvars</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># subset to a few actors</span></span>
<span><span class="va">actors_to_keep</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">'Australia'</span>, <span class="st">'Brazil'</span>,</span>
<span>  <span class="st">'Canada'</span>, <span class="st">'Chile'</span>, <span class="st">'China'</span>,</span>
<span>  <span class="st">'Colombia'</span>, <span class="st">'Egypt'</span>, <span class="st">'Ethiopia'</span>,</span>
<span>  <span class="st">'France'</span>, <span class="st">'Germany'</span>, <span class="st">'Ghana'</span>, </span>
<span>  <span class="st">'Hungary'</span>, <span class="st">'India'</span>, <span class="st">'Indonesia'</span>, </span>
<span>  <span class="st">'Iran, Islamic Republic Of'</span>, </span>
<span>  <span class="st">'Israel'</span>, <span class="st">'Italy'</span>, <span class="st">'Japan'</span>, <span class="st">'Kenya'</span>, </span>
<span>  <span class="st">"Korea, Democratic People's Republic Of"</span>,</span>
<span>  <span class="st">'Korea, Republic Of'</span>, <span class="st">'Nigeria'</span>, <span class="st">'Pakistan'</span>, </span>
<span>  <span class="st">'Qatar'</span>, <span class="st">'Russian Federation'</span>, <span class="st">'Saudi Arabia'</span>,</span>
<span>  <span class="st">'South Africa'</span>, <span class="st">'Spain'</span>, <span class="st">'Sudan'</span>, </span>
<span>  <span class="st">'Syrian Arab Republic'</span>, <span class="st">'Thailand'</span>, </span>
<span>  <span class="st">'United Kingdom'</span>, <span class="st">'United States'</span>, </span>
<span>  <span class="st">'Zimbabwe'</span> <span class="op">)</span></span>
<span><span class="va">netlet</span> <span class="op">=</span> <span class="fu"><a href="../reference/subset_netify.html">subset_netify</a></span><span class="op">(</span></span>
<span>  <span class="va">netlet</span>, </span>
<span>  actors <span class="op">=</span> <span class="va">actors_to_keep</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print</span></span>
<span><span class="va">netlet</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #00BB00;">✔</span> Hello, you have created network data, yay!</span></span>
<span><span class="co">## • Unipartite</span></span>
<span><span class="co">## • Asymmetric</span></span>
<span><span class="co">## • Weights from `verbCoop`</span></span>
<span><span class="co">## • Longitudinal: 13 Periods</span></span>
<span><span class="co">## • # Unique Actors: 34</span></span>
<span><span class="co">## Network Summary Statistics (averaged across time):</span></span>
<span><span class="co">##           dens miss    mean recip trans</span></span>
<span><span class="co">## verbCoop 0.861    0 179.484 0.978 0.928</span></span>
<span><span class="co">## • Nodal Features: i_polity2, i_log_gdp, i_log_pop</span></span>
<span><span class="co">## • Dyad Features: matlCoop, verbConf, matlConf</span></span></code></pre>
<p>This is a longitudinal, weighted network with nodal and dyadic
attributes. In a few more steps we will show how to highlight these
attributes in the plot.</p>
<p>Next, we use the <code>net_plot_data</code> function to create a data
frame for <code>ggplot2</code>. <code>net_plot_data</code> extracts and
sets up node and edge data from a <code>netify</code> object according
to specified plotting arguments. It returns a list of different
components but the most important one for users is the
<code>net_dfs</code> element. This element contains two objects:
<code>edge_data</code> and <code>nodal_data</code>. These are data
frames that can be passed to <code>ggplot2</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a data frame for plotting</span></span>
<span><span class="va">plot_data</span> <span class="op">=</span> <span class="fu"><a href="../reference/net_plot_data.html">net_plot_data</a></span><span class="op">(</span><span class="va">netlet</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get relevant dfs</span></span>
<span><span class="va">net_dfs</span> <span class="op">=</span> <span class="va">plot_data</span><span class="op">$</span><span class="va">net_dfs</span></span>
<span></span>
<span><span class="co"># check structure of what's here</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">net_dfs</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## List of 2</span></span>
<span><span class="co">##  $ edge_data :'data.frame':  12937 obs. of  11 variables:</span></span>
<span><span class="co">##   ..$ from    : chr [1:12937] "Brazil" "Canada" "Chile" "China" ...</span></span>
<span><span class="co">##   ..$ to      : chr [1:12937] "Australia" "Australia" "Australia" "Australia" ...</span></span>
<span><span class="co">##   ..$ time    : chr [1:12937] "2002" "2002" "2002" "2002" ...</span></span>
<span><span class="co">##   ..$ verbCoop: num [1:12937] 5 31 1 518 2 13 22 34 42 483 ...</span></span>
<span><span class="co">##   ..$ matlCoop: int [1:12937] 0 1 0 6 0 0 1 1 0 6 ...</span></span>
<span><span class="co">##   ..$ verbConf: int [1:12937] 0 1 1 12 0 1 2 1 0 114 ...</span></span>
<span><span class="co">##   ..$ matlConf: int [1:12937] 0 2 1 12 0 0 0 4 13 54 ...</span></span>
<span><span class="co">##   ..$ x1      : num [1:12937] -2.95 -2.9 -3.15 -3.09 -2.83 ...</span></span>
<span><span class="co">##   ..$ y1      : num [1:12937] 2.32 2.62 2.22 2.53 2.39 ...</span></span>
<span><span class="co">##   ..$ x2      : num [1:12937] -3.19 -3.19 -3.19 -3.19 -3.19 ...</span></span>
<span><span class="co">##   ..$ y2      : num [1:12937] 2.54 2.54 2.54 2.54 2.54 ...</span></span>
<span><span class="co">##  $ nodal_data:'data.frame':  442 obs. of  10 variables:</span></span>
<span><span class="co">##   ..$ name      : chr [1:442] "Australia" "Australia" "Australia" "Australia" ...</span></span>
<span><span class="co">##   ..$ time      : chr [1:442] "2002" "2003" "2004" "2005" ...</span></span>
<span><span class="co">##   ..$ i_polity2 : int [1:442] 10 10 10 10 10 10 10 10 10 10 ...</span></span>
<span><span class="co">##   ..$ i_log_gdp : num [1:442] 27.6 27.6 27.6 27.7 27.7 ...</span></span>
<span><span class="co">##   ..$ i_log_pop : num [1:442] 16.8 16.8 16.8 16.8 16.8 ...</span></span>
<span><span class="co">##   ..$ x         : num [1:442] -3.187 -0.0567 -1.115 0.4053 4.7545 ...</span></span>
<span><span class="co">##   ..$ y         : num [1:442] 2.535 0.445 -3.669 0.282 1.836 ...</span></span>
<span><span class="co">##   ..$ name_text : chr [1:442] "Australia" "Australia" "Australia" "Australia" ...</span></span>
<span><span class="co">##   ..$ name_label: chr [1:442] "Australia" "Australia" "Australia" "Australia" ...</span></span>
<span><span class="co">##   ..$ id        : chr [1:442] "Australia_2002" "Australia_2003" "Australia_2004" "Australia_2005" ...</span></span></code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># check the first few rows of the edge data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">net_dfs</span><span class="op">$</span><span class="va">edge_data</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##       from        to time verbCoop matlCoop verbConf matlConf        x1</span></span>
<span><span class="co">## 1   Brazil Australia 2002        5        0        0        0 -2.951523</span></span>
<span><span class="co">## 2   Canada Australia 2002       31        1        1        2 -2.895578</span></span>
<span><span class="co">## 3    Chile Australia 2002        1        0        1        1 -3.150793</span></span>
<span><span class="co">## 4    China Australia 2002      518        6       12       12 -3.088811</span></span>
<span><span class="co">## 5 Colombia Australia 2002        2        0        0        0 -2.832835</span></span>
<span><span class="co">## 6    Egypt Australia 2002       13        0        1        0 -2.962405</span></span>
<span><span class="co">##         y1        x2       y2</span></span>
<span><span class="co">## 1 2.315115 -3.186958 2.535002</span></span>
<span><span class="co">## 2 2.616097 -3.186958 2.535002</span></span>
<span><span class="co">## 3 2.222567 -3.186958 2.535002</span></span>
<span><span class="co">## 4 2.532826 -3.186958 2.535002</span></span>
<span><span class="co">## 5 2.394330 -3.186958 2.535002</span></span>
<span><span class="co">## 6 2.626167 -3.186958 2.535002</span></span></code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># check the first few rows of the nodal data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">net_dfs</span><span class="op">$</span><span class="va">nodal_data</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##         name time i_polity2 i_log_gdp i_log_pop           x          y</span></span>
<span><span class="co">## 79 Australia 2002        10  27.55492  16.78568 -3.18695808  2.5350018</span></span>
<span><span class="co">## 80 Australia 2003        10  27.58556  16.79718 -0.05666548  0.4452790</span></span>
<span><span class="co">## 81 Australia 2004        10  27.62686  16.80787 -1.11499738 -3.6691981</span></span>
<span><span class="co">## 82 Australia 2005        10  27.65791  16.82005  0.40527329  0.2821195</span></span>
<span><span class="co">## 83 Australia 2006        10  27.68495  16.83354  4.75445819  1.8357027</span></span>
<span><span class="co">## 84 Australia 2007        10  27.72203  16.85179 -0.95933985 -0.8500965</span></span>
<span><span class="co">##    name_text name_label             id</span></span>
<span><span class="co">## 79 Australia  Australia Australia_2002</span></span>
<span><span class="co">## 80 Australia  Australia Australia_2003</span></span>
<span><span class="co">## 81 Australia  Australia Australia_2004</span></span>
<span><span class="co">## 82 Australia  Australia Australia_2005</span></span>
<span><span class="co">## 83 Australia  Australia Australia_2006</span></span>
<span><span class="co">## 84 Australia  Australia Australia_2007</span></span></code></pre>
<p>The <code>x</code> and <code>y</code> in <code>nodal_data</code> and
the <code>x1</code>, <code>y1</code>, <code>x2</code>, and
<code>y2</code> in <code>edge_data</code> are the coordinates of the
nodes and edges, respectively. These are the coordinates that will be
used to plot the network.</p>
</div>
<div class="section level2">
<h2 id="creating-a-plot">Creating a plot<a class="anchor" aria-label="anchor" href="#creating-a-plot"></a>
</h2>
<p>Now that we have the data, we can create a plot using
<code>ggplot2</code>. We’ll use the <code>geom_segment</code> and
<code>geom_point</code> (or, <code>geom_label</code>,
<code>geom_text</code>, and the `ggrepel package equivalents) functions
to plot the edges and nodes, respectively.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_segment</a></span><span class="op">(</span></span>
<span>        data <span class="op">=</span> <span class="va">net_dfs</span><span class="op">$</span><span class="va">edge_data</span>,</span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>            x<span class="op">=</span><span class="va">x1</span>, </span>
<span>            y<span class="op">=</span><span class="va">y1</span>, </span>
<span>            xend<span class="op">=</span><span class="va">x2</span>, </span>
<span>            yend<span class="op">=</span><span class="va">y2</span></span>
<span>        <span class="op">)</span>,</span>
<span>        color<span class="op">=</span><span class="st">'lightgrey'</span>,</span>
<span>        alpha<span class="op">=</span><span class="fl">.2</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span></span>
<span>        data <span class="op">=</span> <span class="va">net_dfs</span><span class="op">$</span><span class="va">nodal_data</span>,</span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>            x<span class="op">=</span><span class="va">x</span>, </span>
<span>            y<span class="op">=</span><span class="va">y</span>,</span>
<span>            size<span class="op">=</span><span class="va">i_log_pop</span>, </span>
<span>            color<span class="op">=</span><span class="va">i_polity2</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    color<span class="op">=</span><span class="st">'Polity'</span>, </span>
<span>    size<span class="op">=</span><span class="st">'Log(Pop.)'</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html" class="external-link">scale_color_gradient</a></span><span class="op">(</span>low<span class="op">=</span><span class="st">'#a6bddb'</span>, high<span class="op">=</span><span class="st">'#014636'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">time</span>, scales<span class="op">=</span><span class="st">'free'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/theme_netify.html">theme_netify</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="manual_plotting_files/figure-html/unnamed-chunk-5-1.png" width="1350"></p>
<div class="section level3">
<h3 id="changing-the-layout">Changing the layout<a class="anchor" aria-label="anchor" href="#changing-the-layout"></a>
</h3>
<p>By default layouts for node positions are drawn from the
<code>layout_nicely</code> algorithm in the <code>igraph</code> package.
Users can specify other layouts as, for example, say that you wanted to
use the <code>mds</code> algorithm instead:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a df using mds instead </span></span>
<span><span class="va">plot_data_mds</span> <span class="op">=</span> <span class="fu"><a href="../reference/net_plot_data.html">net_plot_data</a></span><span class="op">(</span><span class="va">netlet</span>, </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        layout<span class="op">=</span><span class="st">'mds'</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="co"># see new x-y coordinates</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">plot_data_mds</span><span class="op">$</span><span class="va">net_dfs</span>, <span class="va">head</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $edge_data</span></span>
<span><span class="co">##       from        to time verbCoop matlCoop verbConf matlConf          x1</span></span>
<span><span class="co">## 1   Brazil Australia 2002        5        0        0        0 -0.72811128</span></span>
<span><span class="co">## 2   Canada Australia 2002       31        1        1        2 -0.03316817</span></span>
<span><span class="co">## 3    Chile Australia 2002        1        0        1        1 -0.65201941</span></span>
<span><span class="co">## 4    China Australia 2002      518        6       12       12 -0.03316817</span></span>
<span><span class="co">## 5 Colombia Australia 2002        2        0        0        0 -1.22997412</span></span>
<span><span class="co">## 6    Egypt Australia 2002       13        0        1        0  0.36325222</span></span>
<span><span class="co">##            y1         x2         y2</span></span>
<span><span class="co">## 1  0.36196590 -0.3548545 -0.1680305</span></span>
<span><span class="co">## 2 -0.05312512 -0.3548545 -0.1680305</span></span>
<span><span class="co">## 3  0.27166650 -0.3548545 -0.1680305</span></span>
<span><span class="co">## 4 -0.05312512 -0.3548545 -0.1680305</span></span>
<span><span class="co">## 5 -0.06398966 -0.3548545 -0.1680305</span></span>
<span><span class="co">## 6  0.13977670 -0.3548545 -0.1680305</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $nodal_data</span></span>
<span><span class="co">##         name time i_polity2 i_log_gdp i_log_pop           x           y</span></span>
<span><span class="co">## 79 Australia 2002        10  27.55492  16.78568 -0.35485450 -0.16803048</span></span>
<span><span class="co">## 80 Australia 2003        10  27.58556  16.79718  0.20857397 -0.12705283</span></span>
<span><span class="co">## 81 Australia 2004        10  27.62686  16.80787 -0.04224981  0.05123628</span></span>
<span><span class="co">## 82 Australia 2005        10  27.65791  16.82005 -0.06014447 -0.02708750</span></span>
<span><span class="co">## 83 Australia 2006        10  27.68495  16.83354  0.15073774  0.46114648</span></span>
<span><span class="co">## 84 Australia 2007        10  27.72203  16.85179 -0.03161665 -0.03885021</span></span>
<span><span class="co">##    name_text name_label             id</span></span>
<span><span class="co">## 79 Australia  Australia Australia_2002</span></span>
<span><span class="co">## 80 Australia  Australia Australia_2003</span></span>
<span><span class="co">## 81 Australia  Australia Australia_2004</span></span>
<span><span class="co">## 82 Australia  Australia Australia_2005</span></span>
<span><span class="co">## 83 Australia  Australia Australia_2006</span></span>
<span><span class="co">## 84 Australia  Australia Australia_2007</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="add-edge-information">Add Edge Information<a class="anchor" aria-label="anchor" href="#add-edge-information"></a>
</h3>
<p>So far, we have focused on using color to convey information about
nodal attributes in the network (population size and polity score). Now,
let’s add more edge information to the plot. For example, we can include
information about the <code>matlConf</code> dyadic attribute. Imagine we
want to highlight edges of verbal cooperation that occur at the same
time as when higher than average levels of material conflict occur in
the network. First, let’s create the variable in the edge data.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="st">'dplyr'</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'dplyr'</span>, repos<span class="op">=</span><span class="st">'https://cloud.r-project.org'</span><span class="op">)</span> <span class="op">}</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Attaching package: 'dplyr'</span></span></code></pre>
<pre><code><span><span class="co">## The following objects are masked from 'package:stats':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     filter, lag</span></span></code></pre>
<pre><code><span><span class="co">## The following objects are masked from 'package:base':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     intersect, setdiff, setequal, union</span></span></code></pre>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create high_matlConf variable</span></span>
<span><span class="va">net_dfs</span><span class="op">$</span><span class="va">edge_data</span> <span class="op">=</span> <span class="va">net_dfs</span><span class="op">$</span><span class="va">edge_data</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>        high_matlConf <span class="op">=</span> <span class="va">matlConf</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">matlConf</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># check</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">net_dfs</span><span class="op">$</span><span class="va">edge_data</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##       from        to time verbCoop matlCoop verbConf matlConf        x1</span></span>
<span><span class="co">## 1   Brazil Australia 2002        5        0        0        0 -2.951523</span></span>
<span><span class="co">## 2   Canada Australia 2002       31        1        1        2 -2.895578</span></span>
<span><span class="co">## 3    Chile Australia 2002        1        0        1        1 -3.150793</span></span>
<span><span class="co">## 4    China Australia 2002      518        6       12       12 -3.088811</span></span>
<span><span class="co">## 5 Colombia Australia 2002        2        0        0        0 -2.832835</span></span>
<span><span class="co">## 6    Egypt Australia 2002       13        0        1        0 -2.962405</span></span>
<span><span class="co">##         y1        x2       y2 high_matlConf</span></span>
<span><span class="co">## 1 2.315115 -3.186958 2.535002         FALSE</span></span>
<span><span class="co">## 2 2.616097 -3.186958 2.535002         FALSE</span></span>
<span><span class="co">## 3 2.222567 -3.186958 2.535002         FALSE</span></span>
<span><span class="co">## 4 2.532826 -3.186958 2.535002          TRUE</span></span>
<span><span class="co">## 5 2.394330 -3.186958 2.535002         FALSE</span></span>
<span><span class="co">## 6 2.626167 -3.186958 2.535002         FALSE</span></span></code></pre>
<p>Now that we have the new variable in the data.frame, we can plot by
it but note that we now need a color aesthetic for both points and
segments, even though <code>ggplot2</code> only supports one legend by
aesthetic by default. We can get around this by using the
<code>new_scale_color</code> function from the `<code>ggnewscale</code>
package.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># color line segments by this new variable</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_segment</a></span><span class="op">(</span></span>
<span>        data <span class="op">=</span> <span class="va">net_dfs</span><span class="op">$</span><span class="va">edge_data</span>,</span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>            x<span class="op">=</span><span class="va">x1</span>, </span>
<span>            y<span class="op">=</span><span class="va">y1</span>, </span>
<span>            xend<span class="op">=</span><span class="va">x2</span>, </span>
<span>            yend<span class="op">=</span><span class="va">y2</span>,</span>
<span>            color<span class="op">=</span><span class="va">high_matlConf</span></span>
<span>        <span class="op">)</span>,</span>
<span>        alpha<span class="op">=</span><span class="fl">.2</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span></span>
<span>      name<span class="op">=</span><span class="st">''</span>, </span>
<span>      values<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'grey'</span>, <span class="st">'red'</span><span class="op">)</span>,</span>
<span>      labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Below Avg. Matl. Conf'</span>, <span class="st">'Above Avg.'</span><span class="op">)</span></span>
<span>      <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://eliocamp.github.io/ggnewscale/reference/new_scale.html" class="external-link">new_scale_color</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span></span>
<span>        data <span class="op">=</span> <span class="va">net_dfs</span><span class="op">$</span><span class="va">nodal_data</span>,</span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>            x<span class="op">=</span><span class="va">x</span>, </span>
<span>            y<span class="op">=</span><span class="va">y</span>,</span>
<span>            size<span class="op">=</span><span class="va">i_log_pop</span>, </span>
<span>            color<span class="op">=</span><span class="va">i_polity2</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html" class="external-link">scale_color_gradient</a></span><span class="op">(</span></span>
<span>      name<span class="op">=</span><span class="st">'Polity'</span>,</span>
<span>      low<span class="op">=</span><span class="st">'#a6bddb'</span>, high<span class="op">=</span><span class="st">'#014636'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    size<span class="op">=</span><span class="st">'Log(Pop.)'</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">time</span>, scales<span class="op">=</span><span class="st">'free'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/theme_netify.html">theme_netify</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    legend.position<span class="op">=</span><span class="st">'right'</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="manual_plotting_files/figure-html/unnamed-chunk-8-1.png" width="1350"></p>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ul>
<li><p>Boschee, Elizabeth; Lautenschlager, Jennifer; O’Brien, Sean;
Shellman, Steve; Starz, James; Ward, Michael, 2015, ``ICEWS Coded Event
Data’’, <a href="doi:10.7910/DVN/28075" class="uri">doi:10.7910/DVN/28075</a> , Harvard Dataverse.</p></li>
<li><p>Pedersen, T. L. (2020). ggnewscale: Multiple Fill and Colour
Scales in ‘ggplot2’. R package version 0.4.3. <a href="https://CRAN.R-project.org/package=ggnewscale" class="external-link uri">https://CRAN.R-project.org/package=ggnewscale</a></p></li>
<li><p>Wickham, H. (2016). ggplot2: Elegant Graphics for Data Analysis.
Springer-Verlag New York.</p></li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Cassy Dorff, Shahryar Minhas.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
