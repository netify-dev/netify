<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="netify">
<title>Netify: Manual Plotting with ggplot2 • netify</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Netify: Manual Plotting with ggplot2">
<meta property="og:description" content="netify">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">netify</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/manual_plotting.html">Netify: Manual Plotting with ggplot2</a>
    <a class="dropdown-item" href="../articles/workshop_demo.html">Netify Workshop</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Netify: Manual Plotting with ggplot2</h1>
                        <h4 data-toc-skip class="author">Cassy Dorff and
Shahryar Minhas</h4>
            
            <h4 data-toc-skip class="date">2024-05-20</h4>
      
      
      <div class="d-none name"><code>manual_plotting.Rmd</code></div>
    </div>

    
    
<p>This vignette provides an overview of how to create more customizable
plots using <code>ggplot2</code> and just having <code>netify</code>
serve as the data preparation engine.</p>
<p>Lets load the necessary libraries.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://netify-dev.github.io/netify/">netify</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<p>Additionally, we’ll use the <code>ggnewscale</code> package to create
multiple legends when necessary in the same plot (e.g., if you want to
have legends for a color aesthetic for both nodes and edges).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="st">'ggnewscale'</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'ggnewscale'</span>, repos<span class="op">=</span><span class="st">'https://cloud.r-project.org'</span><span class="op">)</span> <span class="op">}</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://eliocamp.github.io/ggnewscale/" class="external-link">ggnewscale</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="preparing-data">Preparing data<a class="anchor" aria-label="anchor" href="#preparing-data"></a>
</h2>
<p>First lets create a netlet object from some dyadic data using the
<code>netify</code> package.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load icews data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">icews</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># choose attributes</span></span>
<span><span class="va">nvars</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">'i_polity2'</span>, <span class="st">'i_log_gdp'</span>, <span class="st">'i_log_pop'</span> <span class="op">)</span></span>
<span><span class="va">dvars</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">'matlCoop'</span>, <span class="st">'verbConf'</span>, <span class="st">'matlConf'</span> <span class="op">)</span></span>
<span><span class="co">#'</span></span>
<span><span class="co"># create a netify object</span></span>
<span><span class="va">netlet</span> <span class="op">=</span> <span class="fu"><a href="../reference/netify.html">netify</a></span><span class="op">(</span></span>
<span>    dyad_data<span class="op">=</span><span class="va">icews</span>, actor1<span class="op">=</span><span class="st">'i'</span>, actor2<span class="op">=</span><span class="st">'j'</span>,</span>
<span>    time <span class="op">=</span> <span class="st">'year'</span>,</span>
<span>    symmetric<span class="op">=</span><span class="cn">FALSE</span>, weight<span class="op">=</span><span class="st">'verbCoop'</span>,</span>
<span>    mode<span class="op">=</span><span class="st">'unipartite'</span>, sum_dyads<span class="op">=</span><span class="cn">FALSE</span>,</span>
<span>    actor_time_uniform<span class="op">=</span><span class="cn">TRUE</span>, actor_pds<span class="op">=</span><span class="cn">NULL</span>,</span>
<span>    diag_to_NA<span class="op">=</span><span class="cn">TRUE</span>, missing_to_zero<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>    nodal_vars <span class="op">=</span> <span class="va">nvars</span>, </span>
<span>    dyad_vars <span class="op">=</span> <span class="va">dvars</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">netlet</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #00BB00;">✔</span> Hello, you have created network data, yay!</span></span></code></pre>
<pre><code><span><span class="co">## • Longitudinal</span></span></code></pre>
<pre><code><span><span class="co">## • Unipartite</span></span></code></pre>
<pre><code><span><span class="co">## • Asymmetric</span></span></code></pre>
<pre><code><span><span class="co">## • Weights from `verbCoop`</span></span></code></pre>
<pre><code><span><span class="co">## • No Loops Allowed</span></span></code></pre>
<pre><code><span><span class="co">## • Longitudinal: 13 Periods</span></span></code></pre>
<pre><code><span><span class="co">## • # Unique Row Actors: 152</span></span></code></pre>
<pre><code><span><span class="co">## • # Unique Column Actors: 152</span></span></code></pre>
<pre><code><span><span class="co">## • # Unique Actors: 152</span></span></code></pre>
<pre><code><span><span class="co">##            nLoops nEdges  density     recip propNA</span></span>
<span><span class="co">## 1 verbCoop    N/A 124659 19.11395 0.9758868    N/A</span></span></code></pre>
<pre><code><span><span class="co">## • Nodal Features: i_polity2, i_log_gdp, i_log_pop</span></span></code></pre>
<pre><code><span><span class="co">## • Dyad Features: matlCoop, verbConf, matlConf</span></span></code></pre>
<pre><code><span><span class="co">## • Graph Features: None</span></span></code></pre>
<p>This is a longitudinal, weighted network with nodal and dyadic
attributes that we can use for coloring.</p>
<p>We can use the <code>net_plot_data</code> function to create a data
frame that can be used to create a plot using <code>ggplot2</code>.
<code>net_plot_data</code> processes a netify object to extract and set
up node and edge data according to specified plotting arguments. It
returns a list of components the only necessary ones for users are in
the <code>net_dfs</code> element. This element of the list contains two
objects: <code>edge_data</code> and <code>nodal_data</code>. These are
data frames that can be used to create a plot using
<code>ggplot2</code>.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a data frame for plotting</span></span>
<span><span class="va">plot_data</span> <span class="op">=</span> <span class="fu"><a href="../reference/net_plot_data.html">net_plot_data</a></span><span class="op">(</span><span class="va">netlet</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get relevant dfs</span></span>
<span><span class="va">net_dfs</span> <span class="op">=</span> <span class="va">plot_data</span><span class="op">$</span><span class="va">net_dfs</span></span>
<span></span>
<span><span class="co"># check structure of what's here</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">net_dfs</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## List of 2</span></span>
<span><span class="co">##  $ edge_data :'data.frame':  124659 obs. of  11 variables:</span></span>
<span><span class="co">##   ..$ from    : chr [1:124659] "Afghanistan" "Afghanistan" "Afghanistan" "Afghanistan" ...</span></span>
<span><span class="co">##   ..$ to      : chr [1:124659] "Albania" "Albania" "Albania" "Albania" ...</span></span>
<span><span class="co">##   ..$ time    : chr [1:124659] "2002" "2003" "2004" "2006" ...</span></span>
<span><span class="co">##   ..$ verbCoop: num [1:124659] 6 1 10 6 3 2 2 4 1 6 ...</span></span>
<span><span class="co">##   ..$ matlCoop: num [1:124659] 1 1 2 2 2 0 1 0 0 0 ...</span></span>
<span><span class="co">##   ..$ verbConf: num [1:124659] 0 0 0 3 0 0 0 0 0 0 ...</span></span>
<span><span class="co">##   ..$ matlConf: num [1:124659] 0 0 1 21 0 0 2 7 0 0 ...</span></span>
<span><span class="co">##   ..$ x1      : num [1:124659] 4.944 -0.844 4.929 -1.347 0.605 ...</span></span>
<span><span class="co">##   ..$ y1      : num [1:124659] -5.374 10.106 -4.834 9.984 0.486 ...</span></span>
<span><span class="co">##   ..$ x2      : num [1:124659] 5.098 -1.021 4.667 -1.397 0.709 ...</span></span>
<span><span class="co">##   ..$ y2      : num [1:124659] -5.695 10.514 -5.105 10.364 0.194 ...</span></span>
<span><span class="co">##  $ nodal_data:'data.frame':  1976 obs. of  10 variables:</span></span>
<span><span class="co">##   ..$ name      : chr [1:1976] "Afghanistan" "Afghanistan" "Afghanistan" "Afghanistan" ...</span></span>
<span><span class="co">##   ..$ time      : chr [1:1976] "2002" "2003" "2004" "2005" ...</span></span>
<span><span class="co">##   ..$ i_polity2 : int [1:1976] NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">##   ..$ i_log_gdp : num [1:1976] 22.7 22.8 22.8 23 23 ...</span></span>
<span><span class="co">##   ..$ i_log_pop : num [1:1976] 16.9 16.9 17 17 17.1 ...</span></span>
<span><span class="co">##   ..$ x         : num [1:1976] 4.944 -0.844 4.929 -2.189 -1.347 ...</span></span>
<span><span class="co">##   ..$ y         : num [1:1976] -5.37 10.11 -4.83 5.61 9.98 ...</span></span>
<span><span class="co">##   ..$ name_text : chr [1:1976] "Afghanistan" "Afghanistan" "Afghanistan" "Afghanistan" ...</span></span>
<span><span class="co">##   ..$ name_label: chr [1:1976] "Afghanistan" "Afghanistan" "Afghanistan" "Afghanistan" ...</span></span>
<span><span class="co">##   ..$ id        : chr [1:1976] "Afghanistan_2002" "Afghanistan_2003" "Afghanistan_2004" "Afghanistan_2005" ...</span></span></code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># check the first few rows of the edge data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">net_dfs</span><span class="op">$</span><span class="va">edge_data</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##          from      to time verbCoop matlCoop verbConf matlConf         x1</span></span>
<span><span class="co">## 1 Afghanistan Albania 2002        6        1        0        0  4.9439251</span></span>
<span><span class="co">## 2 Afghanistan Albania 2003        1        1        0        0 -0.8438451</span></span>
<span><span class="co">## 3 Afghanistan Albania 2004       10        2        0        1  4.9292862</span></span>
<span><span class="co">## 4 Afghanistan Albania 2006        6        2        3       21 -1.3471888</span></span>
<span><span class="co">## 5 Afghanistan Albania 2007        3        2        0        0  0.6047343</span></span>
<span><span class="co">## 6 Afghanistan Albania 2008        2        0        0        0  6.4941229</span></span>
<span><span class="co">##           y1        x2         y2</span></span>
<span><span class="co">## 1 -5.3742876  5.098347 -5.6954429</span></span>
<span><span class="co">## 2 10.1059532 -1.020616 10.5140109</span></span>
<span><span class="co">## 3 -4.8341786  4.666942 -5.1051429</span></span>
<span><span class="co">## 4  9.9843405 -1.396830 10.3638320</span></span>
<span><span class="co">## 5  0.4859708  0.709353  0.1935343</span></span>
<span><span class="co">## 6 -6.6093371  6.306641 -7.0588512</span></span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># check the first few rows of the nodal data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">net_dfs</span><span class="op">$</span><span class="va">nodal_data</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##          name time i_polity2 i_log_gdp i_log_pop          x          y</span></span>
<span><span class="co">## 1 Afghanistan 2002        NA  22.74550  16.86005  4.9439251 -5.3742876</span></span>
<span><span class="co">## 2 Afghanistan 2003        NA  22.83014  16.93546 -0.8438451 10.1059532</span></span>
<span><span class="co">## 3 Afghanistan 2004        NA  22.84418  16.97479  4.9292862 -4.8341786</span></span>
<span><span class="co">## 4 Afghanistan 2005        NA  22.95061  17.01055 -2.1890941  5.6094818</span></span>
<span><span class="co">## 5 Afghanistan 2006        NA  23.00280  17.05195 -1.3471888  9.9843405</span></span>
<span><span class="co">## 6 Afghanistan 2007        NA  23.13230  17.06988  0.6047343  0.4859708</span></span>
<span><span class="co">##     name_text  name_label               id</span></span>
<span><span class="co">## 1 Afghanistan Afghanistan Afghanistan_2002</span></span>
<span><span class="co">## 2 Afghanistan Afghanistan Afghanistan_2003</span></span>
<span><span class="co">## 3 Afghanistan Afghanistan Afghanistan_2004</span></span>
<span><span class="co">## 4 Afghanistan Afghanistan Afghanistan_2005</span></span>
<span><span class="co">## 5 Afghanistan Afghanistan Afghanistan_2006</span></span>
<span><span class="co">## 6 Afghanistan Afghanistan Afghanistan_2007</span></span></code></pre>
<p>The <code>x</code> and <code>y</code> in <code>nodal_data</code> and
the <code>x1</code>, <code>y1</code>, <code>x2</code>, and
<code>y2</code> in <code>edge_data</code> are the coordinates of the
nodes and edges, respectively. These are the coordinates that will be
used to plot the network.</p>
<div class="section level3">
<h3 id="changing-the-layout">Changing the layout<a class="anchor" aria-label="anchor" href="#changing-the-layout"></a>
</h3>
<p>By default layouts for node positions are drawn from the
<code>layout_nicely</code> algorithm in the <code>igraph</code> package.
Users can specify other layouts as, for example, say that you wanted to
use the <code>fruchterman.reingold</code> algorithm instead:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a df using fr instead </span></span>
<span><span class="va">plot_data_kk</span> <span class="op">=</span> <span class="fu"><a href="../reference/net_plot_data.html">net_plot_data</a></span><span class="op">(</span><span class="va">netlet</span>, </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        layout<span class="op">=</span><span class="st">'kamada.kawai'</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="co"># see new x-y coordinates</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">plot_data_kk</span><span class="op">$</span><span class="va">net_dfs</span>, <span class="va">head</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $edge_data</span></span>
<span><span class="co">##          from      to time verbCoop matlCoop verbConf matlConf         x1</span></span>
<span><span class="co">## 1 Afghanistan Albania 2002        6        1        0        0  2.9072353</span></span>
<span><span class="co">## 2 Afghanistan Albania 2003        1        1        0        0 -5.4075743</span></span>
<span><span class="co">## 3 Afghanistan Albania 2004       10        2        0        1  3.0084361</span></span>
<span><span class="co">## 4 Afghanistan Albania 2006        6        2        3       21 -4.0854283</span></span>
<span><span class="co">## 5 Afghanistan Albania 2007        3        2        0        0 -0.9822983</span></span>
<span><span class="co">## 6 Afghanistan Albania 2008        2        0        0        0  2.6441341</span></span>
<span><span class="co">##           y1         x2        y2</span></span>
<span><span class="co">## 1  2.8933625  4.0451740 -1.414405</span></span>
<span><span class="co">## 2 -1.7307911 -4.9471775  1.491455</span></span>
<span><span class="co">## 3 -2.8270133  3.9931021 -3.996812</span></span>
<span><span class="co">## 4  0.4875206  0.7198861  1.746206</span></span>
<span><span class="co">## 5 -4.8566299 -1.8800679 -4.074513</span></span>
<span><span class="co">## 6 -0.5325870  0.0721004 -1.842811</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $nodal_data</span></span>
<span><span class="co">##          name time i_polity2 i_log_gdp i_log_pop          x          y</span></span>
<span><span class="co">## 1 Afghanistan 2002        NA  22.74550  16.86005  2.9072353  2.8933625</span></span>
<span><span class="co">## 2 Afghanistan 2003        NA  22.83014  16.93546 -5.4075743 -1.7307911</span></span>
<span><span class="co">## 3 Afghanistan 2004        NA  22.84418  16.97479  3.0084361 -2.8270133</span></span>
<span><span class="co">## 4 Afghanistan 2005        NA  22.95061  17.01055 -7.5869657  0.5068657</span></span>
<span><span class="co">## 5 Afghanistan 2006        NA  23.00280  17.05195 -4.0854283  0.4875206</span></span>
<span><span class="co">## 6 Afghanistan 2007        NA  23.13230  17.06988 -0.9822983 -4.8566299</span></span>
<span><span class="co">##     name_text  name_label               id</span></span>
<span><span class="co">## 1 Afghanistan Afghanistan Afghanistan_2002</span></span>
<span><span class="co">## 2 Afghanistan Afghanistan Afghanistan_2003</span></span>
<span><span class="co">## 3 Afghanistan Afghanistan Afghanistan_2004</span></span>
<span><span class="co">## 4 Afghanistan Afghanistan Afghanistan_2005</span></span>
<span><span class="co">## 5 Afghanistan Afghanistan Afghanistan_2006</span></span>
<span><span class="co">## 6 Afghanistan Afghanistan Afghanistan_2007</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="creating-a-plot">Creating a plot<a class="anchor" aria-label="anchor" href="#creating-a-plot"></a>
</h2>
<p>Now that we have the data, we can create a plot using
<code>ggplot2</code>. We’ll use the <code>geom_segment</code> and
<code>geom_point</code> (or, <code>geom_label</code>,
<code>geom_text</code>, and the `ggrepel package equivalents) functions
to plot the edges and nodes, respectively.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_segment</a></span><span class="op">(</span></span>
<span>        data <span class="op">=</span> <span class="va">net_dfs</span><span class="op">$</span><span class="va">edge_data</span>,</span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>            x<span class="op">=</span><span class="va">x1</span>, </span>
<span>            y<span class="op">=</span><span class="va">y1</span>, </span>
<span>            xend<span class="op">=</span><span class="va">x2</span>, </span>
<span>            yend<span class="op">=</span><span class="va">y2</span></span>
<span>        <span class="op">)</span>,</span>
<span>        color<span class="op">=</span><span class="st">'lightgrey'</span>,</span>
<span>        alpha<span class="op">=</span><span class="fl">.2</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span></span>
<span>        data <span class="op">=</span> <span class="va">net_dfs</span><span class="op">$</span><span class="va">nodal_data</span>,</span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>            x<span class="op">=</span><span class="va">x</span>, </span>
<span>            y<span class="op">=</span><span class="va">y</span>,</span>
<span>            size<span class="op">=</span><span class="va">i_log_pop</span>, </span>
<span>            color<span class="op">=</span><span class="va">i_polity2</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html" class="external-link">scale_color_gradient</a></span><span class="op">(</span>low<span class="op">=</span><span class="st">'lightgreen'</span>, high<span class="op">=</span><span class="st">'darkgreen'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">time</span>, scales<span class="op">=</span><span class="st">'free'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/theme_netify.html">theme_netify</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="manual_plotting_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>Say that we wanted to add in some additonal edge information to the
plot, say information about the <code>matlConf</code> dyadic attribute.
Lets say that we wanted to highlight edges of verbal cooperation that
were occurring at the same time that higher than average levels of
material conflict were occurring. First lets create the variable in the
edge data.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="st">'dplyr'</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'dplyr'</span>, repos<span class="op">=</span><span class="st">'https://cloud.r-project.org'</span><span class="op">)</span> <span class="op">}</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Attaching package: 'dplyr'</span></span></code></pre>
<pre><code><span><span class="co">## The following objects are masked from 'package:stats':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     filter, lag</span></span></code></pre>
<pre><code><span><span class="co">## The following objects are masked from 'package:base':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     intersect, setdiff, setequal, union</span></span></code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create high_matlConf variable</span></span>
<span><span class="va">net_dfs</span><span class="op">$</span><span class="va">edge_data</span> <span class="op">=</span> <span class="va">net_dfs</span><span class="op">$</span><span class="va">edge_data</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>        high_matlConf <span class="op">=</span> <span class="va">matlConf</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">matlConf</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># check</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">net_dfs</span><span class="op">$</span><span class="va">edge_data</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##          from      to time verbCoop matlCoop verbConf matlConf         x1</span></span>
<span><span class="co">## 1 Afghanistan Albania 2002        6        1        0        0  4.9439251</span></span>
<span><span class="co">## 2 Afghanistan Albania 2003        1        1        0        0 -0.8438451</span></span>
<span><span class="co">## 3 Afghanistan Albania 2004       10        2        0        1  4.9292862</span></span>
<span><span class="co">## 4 Afghanistan Albania 2006        6        2        3       21 -1.3471888</span></span>
<span><span class="co">## 5 Afghanistan Albania 2007        3        2        0        0  0.6047343</span></span>
<span><span class="co">## 6 Afghanistan Albania 2008        2        0        0        0  6.4941229</span></span>
<span><span class="co">##           y1        x2         y2 high_matlConf</span></span>
<span><span class="co">## 1 -5.3742876  5.098347 -5.6954429         FALSE</span></span>
<span><span class="co">## 2 10.1059532 -1.020616 10.5140109         FALSE</span></span>
<span><span class="co">## 3 -4.8341786  4.666942 -5.1051429         FALSE</span></span>
<span><span class="co">## 4  9.9843405 -1.396830 10.3638320          TRUE</span></span>
<span><span class="co">## 5  0.4859708  0.709353  0.1935343         FALSE</span></span>
<span><span class="co">## 6 -6.6093371  6.306641 -7.0588512         FALSE</span></span></code></pre>
<p>Now that we have the new varaible in the data.frame, we can plot by
it but note that we will have a color aesthetic for points and segments,
<code>ggplot2</code> by default only supports one legend by aesthetic.
We can get around this by using the <code>new_scale_color</code>
function from the `<code>ggnewscale</code> package.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># color line segments by this new variable</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_segment</a></span><span class="op">(</span></span>
<span>        data <span class="op">=</span> <span class="va">net_dfs</span><span class="op">$</span><span class="va">edge_data</span>,</span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>            x<span class="op">=</span><span class="va">x1</span>, </span>
<span>            y<span class="op">=</span><span class="va">y1</span>, </span>
<span>            xend<span class="op">=</span><span class="va">x2</span>, </span>
<span>            yend<span class="op">=</span><span class="va">y2</span>,</span>
<span>            color<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">high_matlConf</span><span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        alpha<span class="op">=</span><span class="fl">.2</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'lightgrey'</span>, <span class="st">'red'</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://eliocamp.github.io/ggnewscale/reference/new_scale.html" class="external-link">new_scale_color</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span></span>
<span>        data <span class="op">=</span> <span class="va">net_dfs</span><span class="op">$</span><span class="va">nodal_data</span>,</span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>            x<span class="op">=</span><span class="va">x</span>, </span>
<span>            y<span class="op">=</span><span class="va">y</span>,</span>
<span>            size<span class="op">=</span><span class="va">i_log_pop</span>, </span>
<span>            color<span class="op">=</span><span class="va">i_polity2</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html" class="external-link">scale_color_gradient</a></span><span class="op">(</span>low<span class="op">=</span><span class="st">'lightgreen'</span>, high<span class="op">=</span><span class="st">'darkgreen'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">time</span>, scales<span class="op">=</span><span class="st">'free'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/theme_netify.html">theme_netify</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="manual_plotting_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Cassy Dorff, Shahryar Minhas.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
