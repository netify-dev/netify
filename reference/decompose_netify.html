<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Decompose a netify object into edge and node data frames — decompose_netify • netify</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Decompose a netify object into edge and node data frames — decompose_netify"><meta name="description" content="decompose_netify (also available as decompose) separates a netify
object into its constituent parts: a data frame of edges with attributes and
a data frame of nodal attributes."><meta property="og:description" content="decompose_netify (also available as decompose) separates a netify
object into its constituent parts: a data frame of edges with attributes and
a data frame of nodal attributes."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">netify</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ego_networks.html">Netify: Ego Networks</a></li>
    <li><a class="dropdown-item" href="../articles/manual_plotting.html">Netify: Manual Plotting with ggplot2</a></li>
    <li><a class="dropdown-item" href="../articles/PSSI_workshop_final.html">Netify: Workshop PSSI</a></li>
    <li><a class="dropdown-item" href="../articles/resources.html">Helpful Resources</a></li>
    <li><a class="dropdown-item" href="../articles/workshop_demo.html">Netify Workshop</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/netify-dev/netify/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Decompose a netify object into edge and node data frames</h1>
      <small class="dont-index">Source: <a href="https://github.com/netify-dev/netify/blob/main/R/decompose_rs.R" class="external-link"><code>R/decompose_rs.R</code></a></small>
      <div class="d-none name"><code>decompose_netify.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>decompose_netify</code> (also available as <code>decompose</code>) separates a netify
object into its constituent parts: a data frame of edges with attributes and
a data frame of nodal attributes.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">decompose_netify</span><span class="op">(</span><span class="va">netlet</span>, remove_zeros <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-netlet">netlet<a class="anchor" aria-label="anchor" href="#arg-netlet"></a></dt>
<dd><p>A netify object (class "netify") to be decomposed.</p></dd>


<dt id="arg-remove-zeros">remove_zeros<a class="anchor" aria-label="anchor" href="#arg-remove-zeros"></a></dt>
<dd><p>Logical. If TRUE (default), edges with zero weight values
are removed from the edge data frame. If FALSE, zero-weight edges are retained.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list containing two data frames:</p><ul><li><p><strong>edge_data</strong>: A data frame where each row represents an edge with columns:</p><ul><li><p><code>from</code>: Source node identifier</p></li>
<li><p><code>to</code>: Target node identifier</p></li>
<li><p><code>time</code>: Time period (character; "1" for cross-sectional networks)</p></li>
<li><p><code>weight</code>: Edge weight values (using original weight variable name if specified)</p></li>
<li><p>Additional columns for any dyadic variables stored in the netify object</p></li>
</ul></li>
<li><p><strong>nodal_data</strong>: A data frame where each row represents a node-time combination with columns:</p><ul><li><p><code>name</code>: Node identifier</p></li>
<li><p><code>time</code>: Time period (character; "1" for cross-sectional networks)</p></li>
<li><p>Additional columns for any nodal variables stored in the netify object</p></li>
</ul></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function helpful for:</p>
<p><strong>Edge data processing:</strong></p><ul><li><p>Extracts the adjacency matrix (or array for longitudinal networks) from the netify object</p></li>
<li><p>Converts it to long format using reshape2::melt</p></li>
<li><p>Removes self-loops (edges where source equals target)</p></li>
<li><p>Optionally removes zero-weight edges based on the remove_zeros parameter</p></li>
<li><p>Merges any dyadic variables stored in the netify object</p></li>
<li><p>Renames columns to standardized names (from, to, time)</p></li>
</ul><p><strong>Node data processing:</strong></p><ul><li><p>Extracts nodal attributes if present, or constructs from actor_pds information</p></li>
<li><p>Ensures consistent time variable across node and edge data</p></li>
<li><p>Renames columns to standardized names (name, time)</p></li>
</ul><p><strong>Time handling:</strong></p><ul><li><p>For cross-sectional networks: Sets time to "1" in both data frames</p></li>
<li><p>For longitudinal networks: Preserves original time periods as character values</p></li>
<li><p>For ego networks: Extracts time from ego-time concatenated identifiers</p></li>
</ul><p><strong>Variable preservation:</strong></p>
<p>All dyadic and nodal variables stored in the netify object are preserved in the
output data frames. Dyadic variables are merged with the edge data, while nodal
variables remain in the nodal data frame.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Cassy Dorff, Shahryar Minhas</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Load example data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">icews</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 1: Cross-sectional network</span></span></span>
<span class="r-in"><span><span class="va">icews_10</span> <span class="op">&lt;-</span> <span class="va">icews</span><span class="op">[</span><span class="va">icews</span><span class="op">$</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2010</span>,<span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create netify object</span></span></span>
<span class="r-in"><span><span class="va">net_cs</span> <span class="op">&lt;-</span> <span class="fu"><a href="netify.html">netify</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">icews_10</span>,</span></span>
<span class="r-in"><span>  actor1 <span class="op">=</span> <span class="st">'i'</span>, actor2 <span class="op">=</span> <span class="st">'j'</span>,</span></span>
<span class="r-in"><span>  symmetric <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  weight <span class="op">=</span> <span class="st">'verbCoop'</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Decompose to data frames</span></span></span>
<span class="r-in"><span><span class="va">decomposed_cs</span> <span class="op">&lt;-</span> <span class="fu">decompose_netify</span><span class="op">(</span><span class="va">net_cs</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Examine structure</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">decomposed_cs</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ edge_data :'data.frame':	9976 obs. of  4 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ from    : chr [1:9976] "Albania" "Algeria" "Argentina" "Armenia" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ to      : chr [1:9976] "Afghanistan" "Afghanistan" "Afghanistan" "Afghanistan" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ time    : chr [1:9976] "1" "1" "1" "1" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ verbCoop: num [1:9976] 5 5 2 10 200 2 13 2 19 12 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ nodal_data:'data.frame':	152 obs. of  2 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ name: chr [1:152] "Afghanistan" "Albania" "Algeria" "Angola" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ time: chr [1:152] "1" "1" "1" "1" ...</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">decomposed_cs</span><span class="op">$</span><span class="va">edge_data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        from          to time verbCoop</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   Albania Afghanistan    1        5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   Algeria Afghanistan    1        5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Argentina Afghanistan    1        2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   Armenia Afghanistan    1       10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 Australia Afghanistan    1      200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   Austria Afghanistan    1        2</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">decomposed_cs</span><span class="op">$</span><span class="va">nodal_data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          name time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     Albania    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     Algeria    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      Angola    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   Argentina    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     Armenia    1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2: Longitudinal network with attributes</span></span></span>
<span class="r-in"><span><span class="va">nvars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'i_polity2'</span>, <span class="st">'i_log_gdp'</span>, <span class="st">'i_log_pop'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dvars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'matlCoop'</span>, <span class="st">'verbConf'</span>, <span class="st">'matlConf'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">net_longit</span> <span class="op">&lt;-</span> <span class="fu"><a href="netify.html">netify</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  dyad_data <span class="op">=</span> <span class="va">icews</span>,</span></span>
<span class="r-in"><span>  actor1 <span class="op">=</span> <span class="st">'i'</span>, actor2 <span class="op">=</span> <span class="st">'j'</span>,</span></span>
<span class="r-in"><span>  time <span class="op">=</span> <span class="st">'year'</span>,</span></span>
<span class="r-in"><span>  symmetric <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  weight <span class="op">=</span> <span class="st">'verbCoop'</span>,</span></span>
<span class="r-in"><span>  nodal_vars <span class="op">=</span> <span class="va">nvars</span>,</span></span>
<span class="r-in"><span>  dyad_vars <span class="op">=</span> <span class="va">dvars</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Decompose with all attributes</span></span></span>
<span class="r-in"><span><span class="va">decomposed_longit</span> <span class="op">&lt;-</span> <span class="fu">decompose_netify</span><span class="op">(</span><span class="va">net_longit</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Check that variables are preserved</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">decomposed_longit</span><span class="op">$</span><span class="va">edge_data</span><span class="op">)</span>  <span class="co"># Includes dyadic variables</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "from"     "to"       "time"     "verbCoop" "matlCoop" "verbConf" "matlConf"</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">decomposed_longit</span><span class="op">$</span><span class="va">nodal_data</span><span class="op">)</span>  <span class="co"># Includes nodal variables</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "name"      "time"      "i_polity2" "i_log_gdp" "i_log_pop"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 3: Keep zero-weight edges</span></span></span>
<span class="r-in"><span><span class="va">decomposed_with_zeros</span> <span class="op">&lt;-</span> <span class="fu">decompose_netify</span><span class="op">(</span><span class="va">net_cs</span>, remove_zeros <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compare edge counts</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">decomposed_cs</span><span class="op">$</span><span class="va">edge_data</span><span class="op">)</span>         <span class="co"># Without zeros</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 9976</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">decomposed_with_zeros</span><span class="op">$</span><span class="va">edge_data</span><span class="op">)</span>  <span class="co"># With zeros</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 22952</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 4: Use for visualization prep</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Decompose for use with ggplot2</span></span></span>
<span class="r-in"><span><span class="va">plot_data</span> <span class="op">&lt;-</span> <span class="fu">decompose_netify</span><span class="op">(</span><span class="va">net_cs</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Can now use edge_data and nodal_data separately</span></span></span>
<span class="r-in"><span><span class="co"># for network visualization</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Cassy Dorff, Shahryar Minhas.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

