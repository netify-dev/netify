---
title: "Netify Workshop"
author: "Cassy Dorff and Shahryar Minhas"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Netify Workshop}
  %\VignetteEncoding{UTF-8}
  %\VignetteEngine{knitr::rmarkdown}
editor_options:
  chunk_output_type: console
  
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

##  Package Overview 

This vignette is a high level overview of our package from start to finish. The best use of this vignette is to introduce the main components of the package to larger audiences. This overview covers our primary functions with data examples using minimal writing. 

`netify` goals: 

  (1) Create: Make it easy for users to create networks from raw data in $R$ as well as add additional features, such as nodal variables, to your network object.
  (2) Explore: Explore features of the network you created, like summary statistics and visualization. 
  (3) Advance:  Advance your network analysis to the next stage by preparing it to use in other network packages and modeling approaches. 
  
`netify` provides a suite of primary functions to help achieve these goals:

| Createüí°  | Explore üîé | Advance Ô∏èüöÄ|
|---------|---------|---------|
| `netify()`  | `peek()`  | `prep_for_amen()`  |
| `add_nodal()` | `summary()`   | `prep_for_igraph()`  |
| `add_dyad()`  | `summary_actor()`  | `prep_for_network()`  |
| `subset_netlet()`  | `plot.network()`  |   | 

`netify` can take dyadic data or edgelists to get started. 

- The package can also create different types of networks including:

  - cross sectional networks(with static and varying actor composition)
  - multilayer networks
  - bipartite networks

- As well as create networks with different edge types:
  - weighted 
  - binary 
  - symmetric or non-symmetric 

## Step 1: Create üí°

Begin by loading packages and supplying the data.


```{r, eval=TRUE, results='hide', warning=FALSE, message=FALSE}
# load packages
library(netify)
library(peacesciencer)
library(tidyverse)

# create dyadic data set over time using peacesciencer
cow_dyads <- create_dyadyears( 
     subset_years = c(1995:2014)
     ) %>%
    # add mids
    add_cow_mids() %>%
    # add capital distance
    add_capital_distance() %>%
    # add democracy
    add_democracy()
```

Next, create a `netlet` object from the above COW data frame using our package's core function `netify.` There are many parameters, but the most important ones to highlight are:

- `dyad_data` is a dyadic data.frame that should have at least the following variables used to specify actors:

  - `actor1`: character indicating actor 1 variable in the data
  - `actor2`: character indicating actor 2 variable in the data
  
- `netify_type` is a type of netlet object (`cross-sec`, `longit_list`, or `longit_array`).

```{r, eval=TRUE}
mid_long_network <- netify(
  cow_dyads,
  actor1='ccode1', actor2='ccode2', time='year',
  weight='cowmidonset', 
  actor_time_uniform=FALSE,
  sum_dyads=FALSE, symmetric=TRUE,
  diag_to_NA=TRUE, missing_to_zero=FALSE,
  nodal_vars = c('v2x_polyarchy1', 'v2x_polyarchy2'),
  dyad_vars = c('capdist'),
  dyad_vars_symmetric = c(TRUE, FALSE)
  )
```

*Congratulations* you have created a network object! üéâ

## Step 2: Explore üîé

We made a network, so let's look at it. First, we might want to take a `peek` at the network object to see if the matrix looks the way we'd expect it to look. This function lets you glance at a specific slice of the network, if it is longitudinal, as well as a set range of actors.

```{r}
peek(mid_long_network, when_to_peek = c('2012'), what_to_peek = 30)
```

Next, let's examine a few basic summary components of the network. 

- summary
- summary_actor (how to do only one year)
- subsetnetlet
- plot

```{r}
# entire object
summary(mid_long_network)

# every year & every actor (messy!)
summary_actor_mids <- summary_actor(mid_long_network)

# cannot pass this data frame to plot_actorStats

# top 3 Latin American countries with the largest GDP
latin_am_top10 <- c(140, 70, 160)

# Convert numeric codes to character type 
latin_am_top10 <- as.character(latin_am_top10)

plot_actorStats(summary_actor_mids, 
                longitudinal = TRUE,
                actor_names = latin_am_top10)
```

We can also subset the network to zoom in and explore only a few time periods (or actors).

```{r}
mid_subset <-subset_netlet(mid_long_network, 
                    what_to_subset = 190,
                    when_to_subset = c('2012', '2013', '2014'))

summary(mid_subset)

plot_actorStats(mid_subset$'2012')

plot(test)
```

## Step 3: Advance üöÄ